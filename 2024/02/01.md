# 取り組んだ課題一覧
- 達人に学ぶDB設計

# わかったこと
- 論理設計 = データの形式を決める, テーブルレイアウトを決める設計
- 正規化によって作られる正規形
- 冗長性 = 一つの情報が複数のテーブルに存在すること
- 非一貫性 = データ登録をすることが出来ないようなテーブルを作ってしまう
- 第１正規形の定義:一つのセルの中には一つの値しか含まれない scalar value = scalarは単一のという意味
- １つのセルに値を複数入れ込む場合は、列を増やすか行を増やすかの2択　基本は、行を増やすパターン
- キーは一部であってもNULLを含んではいけない。
- なぜ一つのセルに複数の値を入れてはダメなのか？→関数従属性(functional dependency):Y=f(X) YはXに従属する,セルに複数の値を許せば、主キーが各列の値を一意に決定することが出来ないから,X列の値を決めれば、Y列の値が一つに決まる
- 完全従属関数:主キーを構成するすべての列に銃属性がある
- 第２正規形は部分関数従属を解消することで得られる. 解消方法はテーブルの分割
- 部分関数従属の関係にある列と従属列だけ独立のテーブルにする
- 第２正規形のメリットは、テーブルを分割することで更新以上を防ぐこと
- それぞれに異なる実体（エンティティ）をテーブル分けする
- 正規化とは、現実世界の実体間にある階層の差を反映する手段でもある
- 第２正規化は必ず正規化する前の状態にテーブルを戻すことができる。(可逆的)　無損失分解:情報を完全に保存したままテーブルを分割できる
- 第１正規形に戻すには結合すること。正規化の逆操作は結合。
- テーブル内部に存在する段階的な従属関数のことを推移的関数従属 ex)会社コード,社員ID → 部署コード → 部署名
- 第３正規化も同様にテーブルの分割をしていく。
- ボイスーコッド正規形(3.5正規形):第３正規形と第４正規形の間にボイスーコッド正規形が定義されている。ボイスーコッド正規形への分解は気をつけないと非可逆な分解を行なってしまう。(多対多)
- エンティティ同士の関連 = 関連エンティティ,主キーで構成されるのが関連エンティティの特徴
- 多値従属性:キーと集合との対応
- 第４正規形は、独立な多値従属性が複数存在するテーブルを分割すること
- 関連エンティティを作る場合は、そこに含まれる関連は一つだけにすること
- 第５正規形では、関連がある場合はそれに対応する関連エンティティを作ること,関連と関連エンティティは一対一で対応させること
- ポイント１ 正規化とは更新時の不具合/不整合を排除するために行う:正規化の目的は更新時の不具合を防ぐために行う。データの冗長性を排除して、オペレーションミスによるデータの不整合を防ぐ。
- ポイント2 正規化は従属性を見抜くことで可能になる:部分関数従属(第２正規形),推移的関数従属(第３正規形)どの列がどのキーに従属しているかは業務ロジックで決まることなので各列と業務の関係を調べる必要がある
- 正規化は常にするべき?:第３正規形までは原則として行う, 関連エンティティが存在する場合は、関連とエンティティが１対１に対応するように注意する
- 正規化のメリット:データの冗長性が排除され、更新時の不整合を防止できる。テーブルの持つ意味が明確になり、開発者が理解しやすい。  正規化のデメリット：テーブルの数が増えるため、SQLで結合を多用することになりパフォーマンスの悪化につながる
- RDBのテーブル間の関係は基本的には１対多,
- ER図の最初のポイントとして、あるテーブルの主キーが他のテーブルの列に含まれているか
- １対１,1対多,多対多の３種類
- 1対1のレコードはあまり見かけない
- 多対多:業務要件テーブルからテーブルを作っていくとこのパターンになることが多い
- 関連実体(associative entity):多対多の間に新しいテーブルを挟んで、１対多にすることが目的
- 正規化をするとSQLのパフォーマンスに影響を及ぼす.JOINはSQL処理の中でも高コストである. この問題に対しての解決策は２通り→SQL文のチューニング,非正規化
- 非正規化によってselect文で結合なしで比較的簡単に取得できる.ただ、更新処理の更新するレコード数によってパフォーマンスが下がるため、正規化を優先させる
- データの整合性とパフォーマンスはトレードオフの関係である
- 冗長性排除によって起きる問題は２パターン:サマリーデータの冗長性排除と選択条件の冗長性排除
- 

# 次やること
- 達人に学ぶDB設計

# 感じたこと
- やっと5章半ばまで到達
- 今週までに読み切ることを目標！


# 学習時間
- 6.5時間

# 累計学習時間
- 424.25時間
